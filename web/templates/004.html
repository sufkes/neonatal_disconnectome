{% from 'forms.html' import input as input_field, radio as input_radio %}
{% extends 'base.html' %}
{% block title %}Disconnectome{% endblock %}
{% block head_scripts %}
async function pick_file() {
document.getElementById('warpVisitationMap').classList.add("loading");


document.getElementById('subjectID').setAttribute('disabled', "");


let subject = document.getElementById('subjectID').value;
let type = document.querySelector('input[name=type]:checked').value;

// Call into Python so we can access the file system
let random_filename = await eel.step4(subject, type)();
document.getElementById('warpVisitationMap').classList.remove("loading");

document.getElementById('subjectID').removeAttribute("disabled");

}
{% endblock %}

{% block content %}

<form id="warpVisitationMap" method="post" onsubmit="pick_file(); return false;">
  <h2>Warp Visitation Map To 40 Week Template</h2>
  <p>
    Required fields are followed by
    <strong><span aria-label="required" class="required">*</span></strong>.
  </p>

  <h4>Image Data</h4>
  <fieldset>
    <legend>Select type of brain image: <strong><span aria-label="required" class="required">*</span></strong>
    </legend>

    {{ input_radio(id='T1w', name="type", text='T1w', value="T1w",
    type="radio") }}

    {{ input_radio(id='T2w', name="type", text='T2w', value="T2w",
    type="radio") }}

  </fieldset>


  <h4>Subject data</h4>
  <p>
    {{ input_field(id='subjectID', name="subject", text='Subject ID')
    }}
  </p>


  <p><button id="submitButton" type="submit" class="button-primary">Submit</button></p>

</form>

{% endblock %}
